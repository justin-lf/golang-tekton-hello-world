name: 'Main1'

on:
  pull_request:
    types: [opened, reopened]
  
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  
permissions:
  contents: read

jobs:
  terraform:
    runs-on: ubuntu-latest
  
    steps:
    - name: Setup Git
      uses: actions/checkout@v3
      with:
        credentials: ${{secrets.TEST_PAT}}
    - run: |
        mkdir -p $XDG_CONFIG_HOME/.config/git
        touch $XDG_CONFIG_HOME/.config/git/credentials
        echo -e ${{secrets.TEST_PAT}} > $XDG_CONFIG_HOME/.config/git/credentials
        less $XDG_CONFIG_HOME/.config/git/credentials
        git config --global user.name "justin-lf"
        git config --global 'credential.helper' 'store'
        git config --global --replace-all "url.https://github.com/.insteadOf" "ssh://git@github.com/"
        git config --global --add "url.https://github.com/.insteadOf" "git@github.com:"
        git clone https://github.com/justin-lf/cloudbees-core.git
        ls -al

        
