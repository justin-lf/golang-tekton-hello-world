name: 'Main1'

on:
  pull_request:
    types: [opened, reopened]
  
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  
permissions:
  contents: read

jobs:
  terraform:
    runs-on: ubuntu-latest
  
    steps:
    - name: Setup Git
      uses: actions/checkout@v3
      with:
        credentials: ${{secrets.TEST_PAT}}
    - run: |
        whoami
        pwd
        echo "Config home="$XDG_CONFIG_HOME
        mkdir -p $XDG_CONFIG_HOME/.config/git
        ls -al $XDG_CONFIG_HOME/.config
        touch $XDG_CONFIG_HOME/.config/git/credentials
        ls -al $XDG_CONFIG_HOME/.config/git
        echo ${{secrets.TEST_PAT}} > $XDG_CONFIG_HOME/.config/git/credentials
        less $XDG_CONFIG_HOME/.config/git/credentials
        ls -al
        cd .git/
        ls -al
        less config
        git config --list
        
